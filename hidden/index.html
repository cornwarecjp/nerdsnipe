<html>
<head>
  <script type="text/javascript" src="sjcl.js"></script>
</head>
<body>
Enter the value in standard SI units (meter, kilogram, volt, radians, kelvin, ...).
<p>
Value: <input type="text" id="value"><br>
<input type="button" onclick="processValue()" value="OK">

<script>
function bitArrayToBytes(arr)
{
	//Copied from sjcl.codec.bytes, which is not included in the default build
    var out = [], bl = sjcl.bitArray.bitLength(arr), i, tmp;

    for (i=0; i<bl/8; i++) {

      if ((i&3) === 0) {

        tmp = arr[i/4];

      }

      out.push(tmp >>> 24);

      tmp <<= 8;

    }

    return out;
}


function processValue()
{
	var value = document.getElementById("value").value;
	value = (10000000000 * value).toString()

	var pos = value.indexOf(".");
	if(pos >= 0)
	{
		value = value.slice(0, pos);
	}

	var out = sjcl.hash.sha256.hash(value);

	//hexStr = sjcl.codec.hex.fromBits(out);
	value = bitArrayToBytes(out);

	for(i=0; i<value.length; i++)
	{
		value[i] = value[i] ^ 0x77;
	}

	var hexStr = "";
	for(i=0; i<value.length; i++)
	{
		hexStr += value[i].toString(16);
	}

	document.getElementById("answer").textContent = hexStr;
}
</script>

<p id="answer">

</body>
</html>
